

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sinabs.backend.speck.tospeck &mdash; sinabs-speck 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> sinabs-speck
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">sinabs.backend.speck.tospeck</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sinabs-speck</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>sinabs.backend.speck.tospeck</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/speck_compatible_network.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sinabs-backend-speck-tospeck">
<h1>sinabs.backend.speck.tospeck<a class="headerlink" href="#sinabs-backend-speck-tospeck" title="Permalink to this headline">¶</a></h1>
<p>This module describes the <code class="docutils literal notranslate"><span class="pre">SpeckCompatibleNetwork</span></code> class that is used to transform a spiking neural network into a network that is compatible with speck.</p>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-sinabs.backend.speck.tospeck"></span><dl class="class">
<dt id="sinabs.backend.speck.tospeck.SpeckCompatibleNetwork">
<em class="property">class </em><code class="sig-prename descclassname">sinabs.backend.speck.tospeck.</code><code class="sig-name descname">SpeckCompatibleNetwork</code><span class="sig-paren">(</span><em class="sig-param">snn: Union[torch.nn.modules.container.Sequential, sinabs.network.Network], input_shape: Optional[Tuple[int]] = None, dvs_input: bool = True, discretize: bool = True</em><span class="sig-paren">)</span><a class="headerlink" href="#sinabs.backend.speck.tospeck.SpeckCompatibleNetwork" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a sinabs spiking network, prepare a speck-compatible network.
This can be used to test the network will be equivalent once on Speck.
This class also provides utilities to make the speck configuration and
upload it to Speck.</p>
<p>The following operations are done when converting to speck-compatible:</p>
<ul class="simple">
<li><p>multiple avg pooling layers in a row are consolidated into one and     turned into sum pooling layers;</p></li>
<li><p>checks are performed on layer hyperparameter compatibility with speck     (kernel sizes, strides, padding)</p></li>
<li><p>checks are performed on network structure compatibility with speck     (certain layers can only be followed by other layers)</p></li>
<li><p>linear layers are turned into convolutional layers</p></li>
<li><p>dropout layers are ignored</p></li>
<li><p>weights, biases and thresholds are discretized according to speck requirements</p></li>
</ul>
<p>SpeckCompatibleNetwork: a class turning sinabs networks into speck
compatible networks, and making speck configurations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>snn</strong> (<em>sinabs.Network</em>) – SNN that determines the structure of the <cite>SpeckCompatibleNetwork</cite></p></li>
<li><p><strong>input_shape</strong> (<em>tuple of ints</em>) – Shape of the input, convention: (features, width, height)</p></li>
<li><p><strong>dvs_input</strong> (<em>bool</em>) – Does speck receive input from its DVS camera?</p></li>
<li><p><strong>discretize</strong> (<em>bool</em>) – If True, discretize the parameters and thresholds.
This is needed for uploading weights to speck. Set to False only for
testing purposes.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.consolidate_pooling">
<code class="sig-name descname">consolidate_pooling</code><span class="sig-paren">(</span><em class="sig-param">layers: Sequence[torch.nn.modules.module.Module], dvs: bool</em><span class="sig-paren">)</span> &#x2192; Tuple[Union[int, Tuple[int]], Optional[int]]<a class="headerlink" href="#sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.consolidate_pooling" title="Permalink to this definition">¶</a></dt>
<dd><p>Consolidate the first <cite>AvgPool2d</cite> objects in <cite>layers</cite> until the first object of different type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layers</strong> (<em>Sequence of layer objects</em>) – Contains <cite>AvgPool2d</cite> and other objects.</p></li>
<li><p><strong>dvs</strong> (<em>bool</em>) – If <cite>True</cite>, x- and y- pooling may be different and a tuple is returned instead of an integer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>int or tuple of ints</em> – Consolidated pooling size. Tuple if <cite>dvs</cite> is <cite>True</cite>.</p></li>
<li><p><em>int or None</em> – Index of first object in <cite>layers</cite> that is not a <cite>AvgPool2d</cite>,
or <cite>None</cite>, if all objects in <cite>layers</cite> are <cite>AvgPool2d</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">x: torch.Tensor</em><span class="sig-paren">)</span> &#x2192; torch.Tensor<a class="headerlink" href="#sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Torch’s forward pass.</p>
</dd></dl>

<dl class="method">
<dt id="sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.get_pooling_size">
<code class="sig-name descname">get_pooling_size</code><span class="sig-paren">(</span><em class="sig-param">layer: torch.nn.modules.pooling.AvgPool2d</em>, <em class="sig-param">dvs: bool</em><span class="sig-paren">)</span> &#x2192; Union[int, Tuple[int]]<a class="headerlink" href="#sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.get_pooling_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the pooling size of a pooling object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layer</strong> (<em>torch.nn.AvgPool2d</em><em>)</em>) – Pooling layer</p></li>
<li><p><strong>dvs</strong> (<em>bool</em>) – If <cite>True</cite>, pooling does not need to be symmetric.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>int or tuple of int</em> – Pooling size. If <cite>dvs</cite> is <cite>True</cite>, return a tuple with sizes for
y- and x-pooling.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.make_config">
<code class="sig-name descname">make_config</code><span class="sig-paren">(</span><em class="sig-param">speck_layers_ordering: Sequence[int] = range(0</em>, <em class="sig-param">9)</em><span class="sig-paren">)</span> &#x2192; samna.speck.configuration.SpeckConfiguration.SpeckConfiguration<a class="headerlink" href="#sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.make_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare and output the <cite>samna</cite> Speck configuration for this network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>speck_layers_ordering</strong> (<em>sequence of integers</em>) – The order in which the speck layers will be used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>SpeckConfiguration</em> – Object defining the configuration for speck</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ImportError</strong> – If samna is not available.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.write_speck_config">
<code class="sig-name descname">write_speck_config</code><span class="sig-paren">(</span><em class="sig-param">config_dict: dict</em>, <em class="sig-param">speck_layer: samna.speck.configuration.CNNLayerConfig.CNNLayerConfig</em><span class="sig-paren">)</span><a class="headerlink" href="#sinabs.backend.speck.tospeck.SpeckCompatibleNetwork.write_speck_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a single layer configuration to the speck conf object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_dict</strong> (<em>dict</em>) – Dict containing the configuration</p></li>
<li><p><strong>speck_layer</strong> (<em>CNNLayerConfig</em>) – Speck configuration object representing the layer to which
configuration is written.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Synsense AG

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>